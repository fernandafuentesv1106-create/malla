<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Malla EnfermerÃ­a</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500&family=Playfair+Display:wght@600&display=swap" rel="stylesheet">

<style>
body{
  background:#fff0f6;
  font-family:'Poppins',sans-serif;
  padding:25px;
}

/* HEADER */
.header{
  display:flex;
  align-items:center;
  justify-content:center;
  gap:20px;
  margin-bottom:35px;
}

.logo{
  width:80px;
  height:80px;
  border-radius:16px;
  background:#ffd6e0;
  display:flex;
  align-items:center;
  justify-content:center;
  color:#c9184a;
  font-weight:500;
  font-size:12px;
}

/* TITULO */
h1{
  font-family:'Playfair Display',serif;
  color:#c9184a;
  margin:0;
}

/* CONTENEDOR VERTICAL */
.malla{
  display:flex;
  gap:20px;
  overflow-x:auto;
  padding-bottom:10px;
}

/* COLUMNA SEMESTRE */
.semester{
  min-width:260px;
  background:#ffe5ec;
  border-radius:20px;
  padding:15px;
}

.semester h2{
  text-align:center;
  color:#9d0208;
  margin-bottom:15px;
  font-size:16px;
}

/* MATERIAS */
.subject{
  padding:12px;
  margin-bottom:10px;
  border-radius:14px;
  text-align:center;
  font-size:13px;
  cursor:pointer;
  transition:0.3s;
  user-select:none;
}

.locked{
  background:#f8d7e8;
  color:#9d4edd;
  opacity:0.5;
  cursor:not-allowed;
}

.unlocked{
  background:#ffd6e0;
  color:#6a0572;
}

.approved{
  background:#ff8fab;
  color:white;
  font-weight:500;
}
</style>
</head>

<body>

<div class="header">
  <div class="logo">TU LOGO</div>
  <h1>Malla EnfermerÃ­a ðŸ’—</h1>
</div>

<div class="malla" id="app"></div>

<script>
const subjects = [
  {id:"ingles1",name:"InglÃ©s 1",req:[],sem:1},
  {id:"metrologia",name:"MetrologÃ­a",req:[],sem:1},
  {id:"biologia",name:"BiologÃ­a",req:[],sem:1},
  {id:"catedra1",name:"CÃ¡tedra FUCS 1",req:[],sem:1},
  {id:"cuidado_comunitario",name:"Cuidado comunitario",req:[],sem:1},
  {id:"electiva1",name:"Electiva",req:[],sem:1},
  {id:"historia",name:"Historia y fundamentos",req:[],sem:1},
  {id:"informatica",name:"InformÃ¡tica",req:[],sem:1},
  {id:"morfologia",name:"MorfologÃ­a",req:[],sem:1},

  {id:"ingles2",name:"InglÃ©s 2",req:["ingles1"],sem:2},
  {id:"bioquimica",name:"BioquÃ­mica",req:["metrologia","biologia"],sem:2},
  {id:"electiva2",name:"Electiva",req:[],sem:2},
  {id:"fisiologia",name:"FisiologÃ­a",req:["metrologia","morfologia"],sem:2},
  {id:"fundamentos",name:"Fundamentos cuidado y gerontologÃ­a",
   req:["metrologia","biologia","morfologia","cuidado_comunitario"],sem:2},
  {id:"microbiologia",name:"MicrobiologÃ­a",req:["biologia","morfologia"],sem:2},
  {id:"psico_general",name:"PsicologÃ­a general",req:[],sem:2},

  {id:"adulto1",name:"Cuidado adulto I",
   req:["bioquimica","fisiologia","fundamentos","microbiologia"],sem:3},
  {id:"farmaco1",name:"FarmacologÃ­a I",
   req:["bioquimica","fisiologia","microbiologia"],sem:3},
  {id:"ingles3",name:"InglÃ©s 3",req:["ingles2"],sem:3},
  {id:"semiologia",name:"SemiologÃ­a",req:["morfologia","fisiologia"],sem:3},

  {id:"adulto2",name:"Cuidado adulto II",
   req:["adulto1","farmaco1","semiologia"],sem:4},
  {id:"salud_mental",name:"Salud mental y psiquiÃ¡trica",
   req:["adulto1","farmaco1","semiologia"],sem:4},
  {id:"farmaco2",name:"FarmacologÃ­a II",req:["farmaco1"],sem:4},
  {id:"ingles4",name:"InglÃ©s 4",req:["ingles3"],sem:4},

  {id:"critico",name:"Situaciones crÃ­ticas",
   req:["adulto2","salud_mental","farmaco2","ingles4"],sem:5},

  {id:"mujer",name:"Cuidado mujer niÃ±o y familia",
   req:["critico","historia","informatica"],sem:6},

  {id:"nino",name:"NiÃ±o y adolescente",req:["mujer"],sem:7},
  {id:"gestion",name:"GestiÃ³n del cuidado",req:["nino"],sem:8}
];

let approved = new Set(JSON.parse(localStorage.getItem("approved")) || []);

function canUnlock(s){
  return s.req.every(r=>approved.has(r));
}

function cleanInvalidApprovals(){
  let changed=true;
  while(changed){
    changed=false;
    subjects.forEach(s=>{
      if(approved.has(s.id) && !canUnlock(s) && s.req.length>0){
        approved.delete(s.id);
        changed=true;
      }
    });
  }
}

function save(){
  localStorage.setItem("approved",JSON.stringify([...approved]));
}

function toggleSubject(s){
  if(approved.has(s.id)){
    approved.delete(s.id);
    cleanInvalidApprovals();
  }else{
    approved.add(s.id);
  }
  save();
  render();
}

function render(){
  const app=document.getElementById("app");
  app.innerHTML="";

  for(let sem=1;sem<=8;sem++){
    const col=document.createElement("div");
    col.className="semester";
    col.innerHTML=`<h2>Semestre ${sem}</h2>`;

    subjects.filter(s=>s.sem===sem).forEach(s=>{
      const d=document.createElement("div");
      d.className="subject";

      if(approved.has(s.id)){
        d.classList.add("approved");
        d.onclick=()=>toggleSubject(s);
      }else if(sem===1 || canUnlock(s)){
        d.classList.add("unlocked");
        d.onclick=()=>toggleSubject(s);
      }else{
        d.classList.add("locked");
      }

      d.textContent=s.name;
      col.appendChild(d);
    });

    app.appendChild(col);
  }
}

render();
</script>

</body>
</html>
